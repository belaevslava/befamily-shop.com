var Favorites=function(){function t(){this.localStorageFavoritesKeyName="favorites",this.favorites=[],this.getFavoritesFromLocalStorage(),this.updatePageFavoritesState()}return t.prototype.getFavorites=function(){return this.favorites},t.prototype.getFavoritesFromLocalStorage=function(){try{this.favorites=$.parseJSON(localStorage.getItem(this.localStorageFavoritesKeyName)),this.favorites=$.isArray(this.favorites)?this.favorites:[]}catch(t){this.favorites=[]}},t.prototype.setFavoritesToLocalStorate=function(){var t=JSON.stringify(this.favorites);localStorage.setItem("favorites",t)},t.prototype.addToFavorites=function(t){this.favorites.push(t),$("[data-toggle=favorite][data-product-id="+t+"]").addClass("active"),this.setFavoritesToLocalStorate(),this.updateFavoritesCount()},t.prototype.removeFromFavorites=function(e){this.favorites=$.grep(this.favorites,function(t){return t!=e}),$("[data-toggle=favorite][data-product-id="+e+"]").removeClass("active"),this.setFavoritesToLocalStorate(),this.updateFavoritesCount()},t.prototype.updateFavoritesCount=function(){var t=this.favorites.length;$("[data-favorites-count]").attr("data-favorites-count",t).text(t)},t.prototype.updatePageFavoritesState=function(){var i=this;this.updateFavoritesCount(),$("[data-toggle=favorite]").each(function(t,e){var o=$(e),a=o.data("productId");-1<$.inArray(a,i.favorites)?o.addClass("active"):o.removeClass("active")})},t}();$(document).ready(function(){function t(){var t=$(".page-header").outerHeight();992<=window.innerWidth&&$("[data-sticked]").stick_in_parent({offset_top:t-1})}$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip(),t(),$(window).resize(t)}),$(document).ready(function(){var o=new Favorites;$('[data-toggle="favorite"]').on("click",function(){var t=$(this),e=t.data("productId");if(!e)return console.error('Похоже не задан аттрибут. Пример: [data-product-id="112"]'),!1;t.toggleClass("active"),t.hasClass("active")?o.addToFavorites(e):o.removeFromFavorites(e)})}),function(){"use strict";window.addEventListener("load",function(){var t=document.getElementsByClassName("card-form__needs-validation");Array.prototype.filter.call(t,function(e){e.addEventListener("submit",function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)}(),$(document).ready(function(){$(".cart-table");$("[data-action=remove-row]").on("click",function(){$(this).closest("tr").fadeOut()})}),$(document).ready(function(){$('.catalog-accordion__toogler[data-action="toggle-collapse"]').on("click",function(t){console.log("clicked"),t.preventDefault(),t.stopPropagation();var e=$(this),o=e.closest(".catalog-accordion__item"),a=o.find(".catalog-accordion__content");e.toggleClass("collapsed"),o.toggleClass("active"),a.collapse("toggle").on("shown.bs.collapse",function(){$(document.body).trigger("sticky_kit:recalc")})})}),$(document).ready(function(){var t=$(".catalog-filter");if(t.length<1)return!1;var e=$("[noui-slider]"),o=e[0],a=e.data("minPrice"),i=e.data("maxPrice"),n=$("[noui-slider-from]"),r=$("[noui-slider-to]");function c(t){t.find(".catalog-filter__multiple-control").each(function(t,e){var o=$(e),a=o.attr("name").replace(/\[[0-9]+\]/,"")+"["+t+"]";o.attr("name",a)})}noUiSlider.create(o,{start:[a,i],connect:!0,range:{min:a,max:i},format:wNumb({decimals:0})}),o.noUiSlider.on("update",function(t,e){n.val(t[0]),r.val(t[1])}),n.on("input",function(){o.noUiSlider.set([this.value,null])}),r.on("input",function(){o.noUiSlider.set([null,this.value])}),t.on("click",'[data-action="append-row"]',function(t){t.preventDefault(),t.stopPropagation();var e=$(this),o=e.closest("tbody"),a=o.find("tr:last-child").clone(),i=a.find(".catalog-filter__multiple-control"),n=i.find("*").length,r=o.find(".catalog-filter__multiple-control").length+1,s=e.closest(".form-group");if(n<r)return!1;!function(t,e){var a=[],o=0,i=e.find("option").length+1;t.find("option:selected").each(function(t,e){var o=$(e).index();a.push(o)});for(var n=0;n<i;n++)if(-1===$.inArray(n,a)){o=n;break}e.find("option[selected]").removeAttr("selected"),e.find("option:eq("+o+")").attr("selected","selected")}(s,i),a.addClass("js-appended"),a.find(".catalog-filter__multiple-toggle").attr("data-action","remove-row"),a.find("label").addClass("d-none"),o.append(a),c(s)}).on("click",'[data-action="remove-row"]',function(t){t.preventDefault(),t.stopPropagation();var e=$(this),o=$(this).closest("tr"),a=e.closest(".form-group");o.remove(),c(a)})}),$(document).ready(function(){var a=$(".catalog-tabs");function t(){var t="js-catalog-tabs__accordion",e=a.hasClass(t);window.outerWidth<768&&!e&&a.addClass(t).find(".tab-pane").each(function(){var e=$(this),t=e.attr("id"),o=$('[href="#'+t+'"]');a.find("[data-toggle=pill]").on("click",function(){a.find(".collapse.show").collapse("toggle")}),e.removeClass("active").removeClass("fade").addClass("collapse"),o.removeClass("active").after(e).on("click",function(t){t.preventDefault(),t.stopPropagation(),$(this).toggleClass("collapsed"),e.collapse("toggle")})})}t(),$(window).resize(function(){t()})}),$(document).ready(function(){function t(){var t=$(".page-header").outerHeight();992<=window.innerWidth&&$("[data-sticked]").stick_in_parent({offset_top:t-1})}$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip(),t(),$(window).resize(t)}),$(document).ready(function(){}),$(document).ready(function(){$(".list-of-famous-buyers[data-slick]").slick({centerMode:!1,dots:!1,arrows:!0,slidesToShow:3,responsive:[{breakpoint:992,settings:{arrows:!1,centerMode:!1,dots:!0,slidesToShow:2}},{breakpoint:480,settings:{arrows:!1,centerMode:!1,dots:!0,slidesToShow:1}}]})}),$(document).ready(function(){function t(){if(window.innerWidth<768){var t=$(".list-of-images[data-slick-carousel]");t.hasClass("slick-initialized")||t.slick()}}t(),$(window).resize(t)}),$(document).ready(function(){var t=$(".page-footer"),e=t.find(".page-footer__nav"),o=t.find(".page-footer__nav-title[data-toggle=collapse]");function a(){window.innerWidth<560?(e.addClass("collapse"),o.addClass("collapsed").on("click",function(t){$(this).toggleClass("collapsed").parent().find(".page-footer__nav").collapse("toggle")})):(e.removeClass("collapse"),o.removeClass("collapsed").off("click"))}a(),$(window).resize(a)}),$(document).ready(function(){$(".page-header[is-sticked]").stick_in_parent()}),$,$.getUrlParam=function(t){var e=new RegExp(t+"=([^&]*)","i").exec(window.location.search);return e&&unescape(e[1])||""},$(document).ready(function(){var t=$(".pagination"),e=$.getUrlParam("page");if(!e||e<=1)return!1;t.find(".page-item.active").removeClass("active"),t.find('.page-link[href*="page='+e+'"]').parent().addClass("active")}),$(document).ready(function(){$(".product-includes-item [data-toggle=collapse]").on("click",function(){$(this).toggleClass("collapsed")})}),$(document).ready(function(){$(".product-item__collapse-size").on("click",function(t){t.preventDefault();var e=$(this).closest(".product-item");e.toggleClass("active"),e.find(".product-item__collapse-size").toggleClass("d-none"),e.find(".product-item__added-to-cart").toggleClass("d-none")})}),$(document).ready(function(){$(".product-size-control").find(".btn").on("click",function(){var t=$(this);t.closest(".product-size-control").find(".product-size-control__quantity-select").insertAfter(t)})}),$(document).ready(function(){$(".product-size-popover__link").on("click",function(t){t.preventDefault(),t.stopPropagation()})}),$(document).ready(function(){$(".slider[data-slick]").slick({dots:!0,arrows:!1})}),$(document).ready(function(){$(".cart-page").find(".cart-form").on("submit",function(t){t.preventDefault(),t.stopPropagation();var e,o=$(this),a=o.attr("action"),i=o.attr("method");if(1==this.checkValidity()){var n=$(".cart-page__order-placed-message-collapse"),r=$(".cart-page__products-collapse");e=o.serialize(),n.collapse("show"),r.addClass("d-none"),$("html, body").animate({scrollTop:0},500),$.ajax(a,{method:i,data:e})}else{var s=o.find(":invalid"),c=$(".page-header").outerHeight(),l=s.offset().top-c;$("html, body").animate({scrollTop:l},500)}})}),$(document).ready(function(){}),$(document).ready(function(){var t=$(".favorites-page"),e=t.find(".list-of-favorites"),o=t.find(".favorites-page__catalog-sorter"),a=t.find(".favorites-page__empty-favorites-message");function i(){if(0<e.children().length)return!1;o.addClass("d-none"),a.css({opacity:0}).removeClass("d-none").delay(200).animate({opacity:1},700)}i(),e.find(".complect-item__add-to-favorite").on("click",function(){console.log("removed!"),$(this).closest(".list-of-favorite__item").fadeOut(null,function(){$(this).remove(),i()})})});
//# sourceMappingURL=bundle.min.js.map
